<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!-- cdn방법 -->
<script type="text/javascript">
$(document).ready(function() {
	$("#a").on("click",getData);
});	// end ready	

function getData() {
	$.ajax({
		type: "get",
		// url: "sample02_json3.jsp",
		// cross - domain 문제 : 다른 주소로 비동기 요청시 응답이 안되는 문제 발생
		// 서버쪽에서 다른 도메인에 응답하도록 허락해 주어야 됨
		// 교사용 이클립스 jsp주소를 복붙해옴
		url: "http://localhost:8084/JQueryproject/10_ajax/sample02_json3.jsp",
		dataType: "json",
		success: function(data, status, xhr) {
			console.log(data);
			$.each(data, function(idx, v) {	// 주의
				$("#result").append(v.username+":"+v.age+"<br>");	// 주의 , append쓸것! , text쓰면 1명만 출력됨
			});
			/* for (var i = 0; i < data.length; i++) {
				console.log(data[i].username+":"+data[i].age);
				$("#result").append(data[i].username+":"+data[i].age+"<br>");
			}; */
		},
		error: function(xhr, status, error) {
			$("#result").append(error+"<br>");
			$("#result").append(status+"<br>");
		}
	});	// end ajax
};	// end fn
</script>

</head>
<body>

	<button id="a">ajax요청</button>
	<div id="result"></div>

</body>
</html>









